{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "run video writer",
            "type": "shell",
            "command": "python3",
            "args": [
                "AK_base_linux_port/interface/video/python/video_writer.py",
                "2>&1",
                "&"
            ],
            "isBackground": true,
            "group": "build",
            "problemMatcher": []
        },
        {
            "label": "Load+Run",
            "type": "shell",
            "command": "/opt/vlsi/arm/tools/FVP_Corstone_SSE-320/models/Linux64_GCC-9.3/FVP_Corstone_SSE-320",
            "options": {
                "cwd": "${workspaceFolder}/"
            },
            "windows": {
                "options": {
                    "shell": {
                        "executable": "cmd.exe",
                        "args": [
                            "/d",
                            "/c"
                        ]
                    }
                }
            },
            "linux": {
                "options": {
                    "shell": {
                        "executable": "/bin/bash",
                        "args": [
                            "-c"
                        ]
                    }
                }
            },
            "osx": {
                "options": {
                    "shell": {
                        "executable": "/bin/bash",
                        "args": [
                            "-c"
                        ]
                    }
                }
            },
            "args": [
                "-C", "mps4_board.subsystem.ethosu.num_macs=1024",
                "-C", "mps4_board.visualisation.disable-visualisation=1",
                "-C", "mps4_board.v_path=${workspaceFolder}/AK_base_linux_port/interface/video/python/",
                "-C", "mps4_board.telnetterminal0.mode=raw",
                "${command:arm-debugger.getApplicationFile}"
            ],
            "problemMatcher": [],
            "group": "build"
        },
		{
			"label": "CMSIS Load+Run",
			"dependsOn": [
				// "run video writer",
				"Load+Run"
			],
			"dependsOrder": "sequence",   // <-- important!
			"group": "build"
		}
    ]
}